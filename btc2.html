 <!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>K線圖</title>
    <script src="https://code.highcharts.com/stock/highstock.js"></script>
    <script src="https://code.highcharts.com/stock/modules/data.js"></script>
    <script src="https://code.highcharts.com/stock/modules/exporting.js"></script>
</head>
<body>
    <div id="container" style="height: 400px; min-width: 310px"></div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const fetchData = async (symbol) => {
                const response = await fetch(`https://api.binance.com/api/v3/klines?symbol=${symbol}&interval=1M&startTime=${new Date('2020-01-01').getTime()}`);
                const data = await response.json();
                return data.map(d => [
                    d[0], // 時間
                    parseFloat(d[1]), // 開盤
                    parseFloat(d[2]), // 最高
                    parseFloat(d[3]), // 最低
                    parseFloat(d[4])  // 收盤
                ]);
            };

            const renderChart = async () => {
                const btcData = await fetchData('BTCUSDT');

                Highcharts.stockChart('container', {
                    rangeSelector: {
                        selected: 1
                    },
                    title: {
                        text: 'BTCUSDT K線圖'
                    },
                    series: [{
                        type: 'candlestick',
                        name: 'BTCUSDT',
                        data: btcData,
                        tooltip: {
                            valueDecimals: 2
                        }
                    }]
                });
            };

            renderChart();
        });
    </script>
</body>
</html>
